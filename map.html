<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Viewer</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f7f7f7;
        }
        #graph-container {
            position: relative;
            width: 80vw;
            height: 80vh;
            border: 1px solid #ccc;
            overflow: hidden;
            background-color: #ffffff;
        }
        .sommet {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #4CAF50;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .arete {
            position: absolute;
            stroke-width: 2;
        }
    </style>
</head>
<body>
    <div id="graph-container"></div>

    <script>
        // JSON de test
        const data = {
            sommets: [
                { nom: "A", numero: 1, positionX: 50, positionY: 50 },
                { nom: "B", numero: 2, positionX: 200, positionY: 80 },
                { nom: "C", numero: 3, positionX: 150, positionY: 200 },
                { nom: "D", numero: 4, positionX: 300, positionY: 250 }
            ],
            aretes: [
                { numero_sommet_1: 1, numero_sommet_2: 2, couleur: "#FF5733" },
                { numero_sommet_1: 2, numero_sommet_2: 3, couleur: "#33C3FF" },
                { numero_sommet_1: 3, numero_sommet_2: 4, couleur: "#4CAF50" },
                { numero_sommet_1: 1, numero_sommet_2: 3, couleur: "#FFC300" }
            ]
        };

        // Récupère le conteneur
        const container = document.getElementById("graph-container");

        // Fonction pour dessiner les sommets
        function drawSommets(sommets) {
            sommets.forEach(sommet => {
                const sommetDiv = document.createElement("div");
                sommetDiv.classList.add("sommet");
                sommetDiv.style.left = `${sommet.positionX}px`;
                sommetDiv.style.top = `${sommet.positionY}px`;
                sommetDiv.innerText = sommet.nom;
                sommetDiv.dataset.numero = sommet.numero;
                container.appendChild(sommetDiv);
            });
        }

        // Fonction pour dessiner les arêtes
        function drawAretes(aretes, sommets) {
            aretes.forEach(arete => {
                const sommet1 = sommets.find(s => s.numero === arete.numero_sommet_1);
                const sommet2 = sommets.find(s => s.numero === arete.numero_sommet_2);

                if (sommet1 && sommet2) {
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", sommet1.positionX + 10); // +10 pour le centre du sommet
                    line.setAttribute("y1", sommet1.positionY + 10);
                    line.setAttribute("x2", sommet2.positionX + 10);
                    line.setAttribute("y2", sommet2.positionY + 10);
                    line.setAttribute("stroke", arete.couleur);
                    line.setAttribute("class", "arete");

                    // Ajout de la ligne dans un SVG
                    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    svg.setAttribute("class", "arete");
                    svg.appendChild(line);
                    container.appendChild(svg);
                }
            });
        }

        // Fonction principale pour dessiner le graphe
        function drawGraph(data) {
            drawAretes(data.aretes, data.sommets);
            drawSommets(data.sommets);
        }

        // Affiche le graphe avec les données JSON
        drawGraph(data);
    </script>
</body>
</html>
